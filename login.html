<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tanlov Yangiliklari va Robototexnika Konkursi</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        :root {
            --primary-color: #0066ff;
            --secondary-color: #00ccff;
            --background-color: #000;
            --text-color: #fff;
            --card-bg-color: #1a1a1a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            flex-wrap: wrap;
        }

        h1, h2 {
            font-size: 2rem;
            animation: fadeInDown 0.5s ease;
        }

        .category-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .category-button, #participantListBtn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #333;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .category-button::after, #participantListBtn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s ease, height 0.3s ease;
        }

        .category-button:hover::after, #participantListBtn:hover::after {
            width: 200px;
            height: 200px;
        }

        .category-button.active {
            background-color: var(--primary-color);
        }

        #participantListBtn {
            background-color: var(--secondary-color);
            margin-top: 10px;
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .news-card {
            background-color: var(--card-bg-color);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .news-card:hover {
            transform: translateY(-5px);
        }

        .news-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .news-card-content {
            padding: 20px;
        }

        .news-card h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .news-card p {
            font-size: 0.9rem;
            color: #999;
            margin-bottom: 20px;
        }

        .news-card button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: var(--primary-color);
            color: var(--text-color);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .news-card button:hover {
            background-color: var(--secondary-color);
        }

        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .floating-icon {
            position: fixed;
            font-size: 24px;
            pointer-events: none;
            z-index: 1;
        }

        .robotics-contest {
            margin-top: 60px;
            padding: 40px;
            background-color: var(--card-bg-color);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .robotics-contest::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg at 50% 50%, var(--primary-color) 0deg, transparent 60deg, transparent 300deg, var(--secondary-color) 360deg);
            animation: rotate 20s linear infinite;
            opacity: 0.1;
            z-index: 0;
        }

        .robotics-contest-content {
            position: relative;
            z-index: 1;
        }

        .robotics-form {
            margin-top: 20px;
            display: grid;
            gap: 15px;
        }

        .robotics-form input,
        .robotics-form textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #333;
            background-color: #222;
            color: var(--text-color);
            border-radius: 5px;
        }

        .robotics-form select {
            width: 100%;
            padding: 10px;
            border: 1px solid #333;
            background-color: #222;
            color: var(--text-color);
            border-radius: 5px;
        }

        .robotics-form select option {
            background-color: #222;
        }

        .robotics-form button {
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: var(--text-color);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .robotics-form button:hover {
            background-color: var(--secondary-color);
        }

        .robot-animation {
            width: 100px;
            height: 100px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="5"/><path d="M3 21h18M8 16v5M16 16v5M12 16v5M4 12h16"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            position: absolute;
            bottom: 20px;
            right: 20px;
            animation: moveRobot 5s infinite alternate;
        }

        @keyframes rotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes moveRobot {
            0% {
                transform: translateX(0) rotate(0deg);
            }
            50% {
                transform: translateX(-30px) rotate(10deg);
            }
            100% {
                transform: translateX(0) rotate(-10deg);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .news-card {
            animation: fadeIn 0.5s ease;
        }

        footer {
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
        }

        #countdown {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            margin-top: 20px;
            color: var(--primary-color);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background-color: var(--card-bg-color);
            margin: 10% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: #fff;
            text-decoration: none;
            cursor: pointer;
        }

        #participantList {
            list-style-type: none;
            padding: 0;
        }

        #participantList li {
            background-color: rgba(255, 255, 255, 0.1);
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        #participantList li:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        #participantList li span {
            font-weight: bold;
        }

        #participantList li .participant-details {
            display: flex;
            flex-direction: column;
        }

        #participantList li .participant-email {
            font-size: 0.8em;
            color: #aaa;
        }

        #participantList li .participant-project {
            font-style: italic;
            color: var(--secondary-color);
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                align-items: flex-start;
            }

            .category-buttons {
                margin-top: 10px;
            }

            #participantListBtn {
                width: 100%;
            }

            .modal-content {
                width: 95%;
                margin: 5% auto;
            }
        }

        .nav-menu {
            background-color: #1a1a1a;
            padding: 1rem 0;
            margin-bottom: 2rem;
            border-radius: 8px;
        }

        .nav-menu ul {
            display: flex;
            justify-content: center;
            gap: 2rem;
            list-style: none;
            flex-wrap: wrap;
        }

        .nav-menu li {
            position: relative;
        }

        .nav-menu a {
            color: var(--text-color);
            text-decoration: none;
            font-size: 1rem;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-menu a:hover {
            color: var(--secondary-color);
        }

        .dropdown-arrow {
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid currentColor;
            display: inline-block;
            margin-left: 5px;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background-color: #1a1a1a;
            border-radius: 8px;
            padding: 0.5rem 0;
            min-width: 200px;
            z-index: 1000;
        }

        .nav-menu li:hover .dropdown-menu {
            display: block;
        }

        .dropdown-menu a {
            padding: 0.5rem 1rem;
            display: block;
        }

        .dropdown-menu a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .owner-info {
            background-color: var(--card-bg-color);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .video-section {
            margin-bottom: 20px;
        }

        .video-section video {
            width: 100%;
            border-radius: 10px;
        }

        .statistics {
            background-color: var(--card-bg-color);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .statistics table {
            width: 100%;
            border-collapse: collapse;
        }

        .statistics th, .statistics td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #333;
        }

        .statistics th {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .comments-section {
            background-color: var(--card-bg-color);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .comment {
            border-bottom: 1px solid #333;
            padding: 10px 0;
        }

        .comment-form textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            background-color: #222;
            border: 1px solid #333;
            color: var(--text-color);
            border-radius: 5px;
        }

        .comment-form button {
            background-color: var(--primary-color);
            color: var(--text-color);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .user-info {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
        }

        #logoutBtn {
            background-color: var(--primary-color);
            color: var(--text-color);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-weight: bold;
        }

        #logoutBtn:hover {
            background-color: var(--secondary-color);
        }

        .user-actions {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .user-actions button {
            background-color: var(--primary-color);
            color: var(--text-color);
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 0.8rem;
        }

        .user-actions button:hover {
            background-color: var(--secondary-color);
        }
        .user-details {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .user-details span {
            margin-bottom: 5px;
            font-weight: bold;
        }
    </style>
</head>
<body id="top">
    <div id="particles-js"></div>

    <div class="container">
        <div class="owner-info">
            <h2>Qodirjanov Mumtozbek</h2>
            <p>Tanlov Tashkilotchisi</p>
            <p>Tel: +998 99 973 8120</p>
            <p>Email: gamingalexuz@gmail.com</p>
        </div>

        <nav class="nav-menu">
            <ul>
                <li><a href="#top">Bosh sahifa</a></li>
                <li>
                    <a href="#">Tanlovga oid <span class="dropdown-arrow"></span></a>
                    <div class="dropdown-menu">
                        <a href="#tanlov-haqida">Tanlov haqida</a>
                        <a href="#qoidalar">Qoidalar</a>
                        <a href="#yoriqnoma">Yo'riqnoma</a>
                    </div>
                </li>
                <li>
                    <a href="#">Ishtirokchilar uchun <span class="dropdown-arrow"></span></a>
                    <div class="dropdown-menu">
                        <a href="#royxatdan-otish">Ro'yxatdan o'tish</a>
                        <a href="#talablar">Talablar</a>
                        <a href="#korsatmalar">Ko'rsatmalar</a>
                    </div>
                </li>
                <li><a href="#yangiliklar">Yangiliklar</a></li>
                <li><a href="#statistika">Statistika</a></li>
                <li><a href="#boglanish">Bog'lanish</a></li>
            </ul>
        </nav>

        <header>
            <h1>Tanlov Yangiliklari</h1>
            <div class="category-buttons">
                <button class="category-button active" data-category="all">Barchasi</button>
                <button class="category-button" data-category="education">Ta'lim</button>
                <button class="category-button" data-category="science">Fan</button>
                <button class="category-button" data-category="innovation">Innovatsiya</button>
            </div>
            <div class="user-info">
                <img src="" alt="User Avatar" class="avatar" id="userAvatar">
                <div class="user-details">
                    <span id="userName"></span>
                    <button id="logoutBtn">Chiqish</button>
                </div>
            </div>
        </header>

        <div class="video-section">
            <h2>Tanlov haqida video</h2>
            <video controls autoplay muted>
                <source src="tanlov.mp4" type="video/mp4">
                Brauzeringiz video elementini qo'llab-quvvatlamaydi.
            </video>
        </div>

        <div class="statistics">
            <h2>Statistika</h2>
            <table>
                <thead>
                    <tr>
                        <th>Yo'nalishlar</th>
                        <th>Ta'lim</th>
                        <th>Axborot texnologiyalari</th>
                        <th>Yashil energiya</th>
                        <th>Ekologiya</th>
                        <th>Iqlim o'zgarishi</th>
                        <th>Qishloq xo'jaligi</th>
                        <th>Maktab</th>
                        <th>Robot turi</th>
                        <th>Robot yaratish usuli</th>
                        <th>Jami</th>
                    </tr>
                </thead>
                <tbody id="statistics-body">
                    <!-- Data will be dynamically inserted here -->
                </tbody>
            </table>
        </div>

        <main class="news-grid" id="newsGrid">
            <!-- News cards will be dynamically inserted here -->
        </main>

        <section class="robotics-contest">
            <div class="robotics-contest-content">
                <h2>Robototexnika Konkursida Qatnashing!</h2>
                <p>Innovatsion g'oyalaringizni amalga oshiring va kelajak texnologiyalarini yarating!</p>
                <div id="countdown"></div>
                <form class="robotics-form" id="roboticsForm">
                    <input type="text" name="name" placeholder="Ismingiz" required>
                    <select name="region" id="region-select" required>
                        <option value="">Viloyatingizni tanlang</option>
                        <option value="Andijon viloyati">Andijon viloyati</option>
                        <option value="Buxoro viloyati">Buxoro viloyati</option>
                        <option value="Jizzax viloyati">Jizzax viloyati</option>
                        <option value="Qashqadaryo viloyati">Qashqadaryo viloyati</option>
                        <option value="Navoiy viloyati">Navoiy viloyati</option>
                        <option value="Namangan viloyati">Namangan viloyati</option>
                        <option value="Samarqand viloyati">Samarqand viloyati</option>
                        <option value="Surxondaryo viloyati">Surxondaryo viloyati</option>
                        <option value="Sirdaryo viloyati">Sirdaryo viloyati</option>
                        <option value="Toshkent viloyati">Toshkent viloyati</option>
                        <option value="Farg'ona viloyati">Farg'ona viloyati</option>
                        <option value="Xorazm viloyati">Xorazm viloyati</option>
                        <option value="Qoraqalpog'iston Respublikasi">Qoraqalpog'iston Respublikasi</option>
                    </select>
                    <input type="text" name="school" placeholder="Maktabingizni yozing" required>
                    <select name="district" id="district-select" required>
                        <option value="">Tumaningizni tanlang</option>
                    </select>
                    <input type="email" name="email" placeholder="Email manzilingiz" required>
                    <select name="robotType" required>
                        <option value="">Robot turini tanlang</option>
                        <option value="ecology">Ekologiya</option>
                        <option value="energy">Elektr energiya</option>
                        <option value="it">IT</option>
                        <option value="other">Boshqa</option>
                    </select>
                    <select name="robotConstruction" required>
                        <option value="">Robot yaratish usulini tanlang</option>
                        <option value="hands">Qo'lda yasalgan</option>
                        <option value="constructor">Konstruktor yordamida</option>
                    </select>
                    <textarea name="description" placeholder="Loyihangiz haqida qisqacha ma'lumot" required></textarea>
                    <button type="submit">Ro'yxatdan o'tish</button>
                </form>
            </div>
            <div class="robot-animation"></div>
        </section>

        <div class="comments-section">
            <h2>Fikrlar</h2>
            <div id="comments-list"></div>
            <form class="comment-form" id="commentForm">
                <textarea placeholder="Fikringizni yozing..." required></textarea>
                <button type="submit">Yuborish</button>
            </form>
        </div>

        <footer>
            <p>&copy; 2024 Tanlov Yangiliklari. Barcha huquqlar himoyalangan.</p>
        </footer>
    </div>

    <div id="participantListModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Ro'yxatdan o'tgan ishtirokchilar</h2>
            <ul id="participantList"></ul>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Check if user is logged in
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
            window.location.href = 'login.html';
        } else {
            // Set user avatar and name
            const userAvatar = document.getElementById('userAvatar');
            userAvatar.src = user.avatar || 'https://via.placeholder.com/40';
            const userName = document.getElementById('userName');
            userName.textContent = user.name;
        }

        // Particle.js configuration
        particlesJS('particles-js', {
            particles: {
                number: { value: 80, density: { enable: true, value_area: 800 } },
                color: { value: '#ffffff' },
                shape: { type: 'circle' },
                opacity: { value: 0.5, random: true },
                size: { value: 3, random: true },
                move: { enable: true, speed: 1, direction: 'none', random: true, out_mode: 'out' }
            }
        });

        // Floating icons
        const icons = ['ðŸ¤–', 'ðŸ’»', 'ðŸ”¬', 'ðŸš€', 'ðŸŽ¶'];
        icons.forEach(icon => {
            const iconElement = document.createElement('div');
            iconElement.className = 'floating-icon';
            iconElement.textContent = icon;
            iconElement.style.left = `${Math.random() * 100}vw`;
            iconElement.style.top = `${Math.random() * 100}vh`;
            document.body.appendChild(iconElement);

            function moveIcon() {
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * window.innerHeight;
                iconElement.style.transition = 'all 10s ease';
                iconElement.style.left = `${x}px`;
                iconElement.style.top = `${y}px`;
            }

            setInterval(moveIcon, 10000);
            moveIcon();
        });

        // News data
        const newsItems = [
            { id: 1, category: 'education', title: "Tanlovning birinchi bosqichi e'lon qilindi", image: "https://picsum.photos/300/200?random=1" },
            { id: 2, category: 'science', title: "O'zbekiston Respublikasi Prezidentining Farmoni haqida", image: "https://picsum.photos/300/200?random=2" },
            { id: 3, category: 'innovation', title: "Tanlov bo'lib o'tishi haqida e'lon", image: "https://picsum.photos/300/200?random=3" },
            { id: 4, category: 'education', title: "Yangi ta'lim dasturi joriy etildi", image: "https://picsum.photos/300/200?random=4" },
            { id: 5, category: 'science', title: "Xalqaro ilmiy konferensiya o'tkaziladi", image: "https://picsum.photos/300/200?random=5" },
            { id: 6, category: 'innovation', title: "Startaplar uchun grant dasturi e'lon qilindi", image: "https://picsum.photos/300/200?random=6" },
        ];

        // Render news cards
        function renderNews(category = 'all') {
            const newsGrid = document.getElementById('newsGrid');
            newsGrid.innerHTML = '';

            const filteredNews = category === 'all' 
                ? newsItems 
                : newsItems.filter(item => item.category === category);

            filteredNews.forEach(item => {
                const card = document.createElement('div');
                card.className = 'news-card';
                card.innerHTML = `
                    <img src="${item.image}" alt="${item.title}">
                    <div class="news-card-content">
                        <h3>${item.title}</h3>
                        <p>Kategoriya: ${item.category}</p>
                        <button>Batafsil</button>
                    </div>
                `;
                newsGrid.appendChild(card);
            });
        }

        // Initial render
        renderNews();

        // Category filter
        const categoryButtons = document.querySelectorAll('.category-button');
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                categoryButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                renderNews(button.dataset.category);
            });
        });

        // Countdown timer
        const countdownDate = new Date("2024-12-31T23:59:59").getTime();
        const countdownElement = document.getElementById("countdown");

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = countdownDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            countdownElement.innerHTML = `Konkurs boshlanishiga: ${days} kun ${hours} soat ${minutes} daqiqa ${seconds} soniya`;
        }

        setInterval(updateCountdown, 1000);
        updateCountdown();

        // Participant list
        let participants = JSON.parse(localStorage.getItem('participants')) || [];

        // Form submission
        const roboticsForm = document.getElementById('roboticsForm');
        roboticsForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = new FormData(roboticsForm);
            const data = Object.fromEntries(formData);

            // Add the current user's information
            data.name = user.name;
            data.email = user.email;
            data.region = formData.get('region');
            data.school = formData.get('school');
            data.district = formData.get('district');


            // Check if the email already exists
            if (participants.some(p => p.email === data.email)) {
                alert("Siz allaqachon ro'yxatdan o'tgansiz!");
                return;
            }

            // Add participant to the list
            participants.push(data);

            // Save to local storage
            localStorage.setItem('participants', JSON.stringify(participants));

            // Here you would typically send this data to a server
            console.log('Form data:', data);

            alert("Ro'yxatdan o'tganingiz uchun rahmat! Tez orada siz bilan bog'lanamiz.");
            roboticsForm.reset();

            // Update participant list in modal
            updateParticipantList();
        });

        // Participant list modal
        const modal = document.getElementById("participantListModal");
        const btn = document.getElementById("participantListBtn");
        const span = document.getElementsByClassName("close")[0];

        btn.onclick = function() {
            modal.style.display = "block";
        }

        span.onclick = function() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        function updateParticipantList() {
            const list = document.getElementById("participantList");
            list.innerHTML = "";
            participants.forEach((participant, index) => {
                const li = document.createElement("li");
                li.innerHTML = `
                    <div class="participant-details">
                        <span>${participant.name}</span>
                        <span class="participant-email">${participant.email}</span>
                        <span class="participant-location">${participant.region}, ${participant.district}</span>
                        <span class="participant-school">${participant.school}</span>
                        <span class="participant-project">${participant.robotType} - ${participant.robotConstruction}</span>
                    </div>
                    <span>#${index + 1}</span>
                `;
                list.appendChild(li);
            });
        }

        // Initial update of participant list
        updateParticipantList();

        // Comments functionality
        let comments = JSON.parse(localStorage.getItem('comments')) || [];

        function renderComments() {
            const commentsList = document.getElementById('comments-list');
            commentsList.innerHTML = comments.map(comment => `
                <div class="comment">
                    <p><strong>${comment.author}</strong> - ${comment.date}</p>
                    <p>${comment.text}</p>
                </div>
            `).join('');
        }

        document.getElementById('commentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const textarea = this.querySelector('textarea');
            const comment = {
                author: 'Foydalanuvchi',
                date: new Date().toLocaleDateString(),
                text: textarea.value
            };
            comments.unshift(comment);
            localStorage.setItem('comments', JSON.stringify(comments));
            renderComments();
            textarea.value = '';
        });

        // Initial render of comments
        renderComments();

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Modal windows for menu items
        function openModal(content) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <div>${content}</div>
                </div>
            `;
            document.body.appendChild(modal);
            modal.style.display = 'block';

            const closeBtn = modal.querySelector('.close');
            closeBtn.onclick = function() {
                document.body.removeChild(modal);
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    document.body.removeChild(modal);
                }
            }
        }

        // Event listeners for menu items
        document.querySelector('a[href="#tanlov-haqida"]').addEventListener('click', (e) => {
            e.preventDefault();
            openModal('<h2>Tanlov Haqida</h2><p>Bu yerda tanlov haqida ma\'lumot bo\'ladi.</p>');
        });

        document.querySelector('a[href="#qoidalar"]').addEventListener('click', (e) => {
            e.preventDefault();
            openModal('<h2>Qoidalar</h2><p>Bu yerda tanlov qoidalari bo\'ladi.</p>');
        });

        document.querySelector('a[href="#yoriqnoma"]').addEventListener('click', (e) => {
            e.preventDefault();
            openModal('<h2>Yo`riqnoma</h2><p>Bu yerda tanlov yo\'riqnomasi bo\'ladi.</p>');
        });

        document.querySelector('a[href="#royxatdan-otish"]').addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector('.robotics-contest').scrollIntoView({
                behavior: 'smooth'
            });
        });

        document.querySelector('a[href="#talablar"]').addEventListener('click', (e) => {
            e.preventDefault();
            btn.click(); // Open the participant list modal
        });

        document.querySelector('a[href="#korsatmalar"]').addEventListener('click', (e) => {
            e.preventDefault();
            openModal('<h2>Ko\'rsatmalar</h2><p>Bu yerda ishtirokchilar uchun ko\'rsatmalar bo\'ladi.</p>');
        });

        document.querySelector('a[href="#yangiliklar"]').addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector('.news-grid').scrollIntoView({
                behavior: 'smooth'
            });
        });

        document.querySelector('a[href="#statistika"]').addEventListener('click', (e) => {
            e.preventDefault();
            openModal('<h2>Statistika</h2><p>Bu yerda tanlov statistikasi bo\'ladi.</p>');
        });


        // Real statistics data
        const statisticsData = [
            { region: "Toshkent shahri", education: 150, it: 200, energy: 80, ecology: 100, climate: 50, agriculture: 30, school: "1-son maktab", robotType: "IT", robotConstruction: "Konstruktor" },
            { region: "Toshkent viloyati", education: 120, it: 150, energy: 70, ecology: 90, climate: 40, agriculture: 60, school: "2-son maktab", robotType: "Ekologiya", robotConstruction: "Qo'lda yasalgan" },
            { region: "Samarqand viloyati", education: 100, it: 130, energy: 60, ecology: 80, climate: 35, agriculture: 70, school: "3-son maktab", robotType: "Energiya", robotConstruction: "Konstruktor" },
            { region: "Andijon viloyati", education: 90, it: 110, energy: 50, ecology: 70, climate: 30, agriculture: 80, school: "4-son maktab", robotType: "IT", robotConstruction: "Qo'lda yasalgan" },
            { region: "Farg'ona viloyati", education: 110, it: 140, energy: 65, ecology: 85, climate: 45, agriculture: 75, school: "5-son maktab", robotType: "Ekologiya", robotConstruction: "Konstruktor" },
        ];

        function populateStatistics() {
            const tbody = document.getElementById('statistics-body');
            statisticsData.forEach(data => {
                const total = Object.values(data).reduce((sum, value) => typeof value === 'number' ? sum + value : sum, 0);
                const row = `
                    <tr>
                        <td>${data.region}</td>
                        <td>${data.education}</td>
                        <td>${data.it}</td>
                        <td>${data.energy}</td>
                        <td>${data.ecology}</td>
                        <td>${data.climate}</td>
                        <td>${data.agriculture}</td>
                        <td>${data.school}</td>
                        <td>${data.robotType}</td>
                        <td>${data.robotConstruction}</td>
                        <td>${total}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Call the function to populate statistics
        populateStatistics();


        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('user');
            window.location.href = 'login.html';
        });

        const regionSelect = document.getElementById('region-select');
        const citySelect = document.getElementById('city-select');
        const districtSelect = document.getElementById('district-select');

        const citiesAndDistricts = {
            "Andijon viloyati": {
                districts: ["Andijon tumani", "Asaka tumani", "Buloqboshi tumani", "Bo'z tumani", "Jalolquduq tumani", "Izboskan tumani", "Oltinko'l tumani", "Paxtaobod tumani", "Marhamat tumani", "Shahrixon tumani", "Qo'rg'ontepa tumani", "Xo'jaobod tumani", "Baliqchi tumani", "Ulug'nor tumani"]
            },
            "Buxoro viloyati": {
                districts: ["Buxoro tumani", "Jondor tumani", "Kogon tumani", "Olot tumani", "Peshku tumani", "Qorako'l tumani", "Qorovulbozor tumani", "Romitan tumani", "Shofirkon tumani", "Vobkent tumani", "G'ijduvon tumani"]
            },
            "Jizzax viloyati": {
                districts: ["Arnasoy tumani", "Baxmal tumani", "Do'stlik tumani", "Forish tumani", "G'allaorol tumani", "Sharof Rashidov tumani", "Mirzacho'l tumani", "Paxtakor tumani", "Yangiobod tumani", "Zafarobod tumani", "Zomin tumani"]
            },
            "Qashqadaryo viloyati": {
                districts: ["Chiroqchi tumani", "Dehqonobod tumani", "G'uzor tumani", "Kasbi tumani", "Kitob tumani", "Koson tumani", "Mirishkor tumani", "Muborak tumani", "Nishon tumani", "Qarshi tumani", "Shahrisabz tumani", "Yakkabog' tumani"]
            },
            "Navoiy viloyati": {
                districts: ["Konimex tumani", "Navbahor tumani", "Nurota tumani", "Qiziltepa tumani", "Tomdi tumani", "Uchquduq tumani", "Xatirchi tumani"]
            },
            "Namangan viloyati": {
                districts: ["Chortoq tumani", "Chust tumani", "Kosonsoy tumani", "Mingbuloq tumani", "Namangan tumani", "Norin tumani", "Pop tumani", "To'raqo'rg'on tumani", "Uychi tumani", "Uchqo'rg'on tumani", "Yangiqo'rg'on tumani"]
            },
            "Samarqand viloyati": {
                districts: ["Bulung'ur tumani", "Ishtixon tumani", "Jomboy tumani", "Kattaqo'rg'on tumani", "Narpay tumani", "Oqdaryo tumani", "Paxtachi tumani", "Payariq tumani", "Qo'shrabot tumani", "Samarqand tumani", "Toyloq tumani", "Urgut tumani"]
            },
            "Surxondaryo viloyati": {
                districts: ["Angor tumani", "Bandixon tumani", "Boysun tumani", "Denov tumani", "Jarqo'rg'on tumani", "Muzrabot tumani", "Oltinsoy tumani", "Qiziriq tumani", "Qumqo'rg'on tumani", "Sariosiyo tumani", "Sherobod tumani", "Sho'rchi tumani", "Termiz tumani"]
            },
            "Sirdaryo viloyati": {
                districts: ["Akaltyn tumani", "Bayaut tumani", "Guliston tumani", "Mirzaobod tumani", "Oqoltin tumani", "Sayxunobod tumani", "Sirdaryo tumani", "Xovos tumani"]
            },
            "Toshkent viloyati": {
                districts: ["Bekobod tumani", "Bo'ka tumani", "Chinoz tumani", "Ohangaron tumani", "Oqqo'rg'on tumani", "Parkent tumani", "Piskent tumani", "Quyichirchiq tumani", "Toshkent tumani", "Yangiyo'l tumani", "Zangiota tumani", "Yuqorichirchiq tumani"]
            },
            "Farg'ona viloyati": {
                districts: ["Bag'dod tumani", "Beshariq tumani", "Buvayda tumani", "Dang'ara tumani", "Farg'ona tumani", "Furqat tumani", "O'zbekiston tumani", "Oltiariq tumani", "Quva tumani", "Rishton tumani", "So'x tumani", "Toshloq tumani", "Yozyovon tumani"]
            },
            "Xorazm viloyati": {
                districts: ["Bog'ot tumani", "Gurlan tumani", "Qo'shko'pir tumani", "Shovot tumani", "Xazorasp tumani", "Xiva tumani", "Yangibozor tumani", "Yangiariq tumani"]
            },
            "Qoraqalpog'iston Respublikasi": {
                districts: ["Amudaryo tumani", "Beruniy tumani", "Chimboy tumani", "Ellikqal'a tumani", "Kegeyli tumani", "Mo'ynoq tumani", "Nukus tumani", "Qanliko'l tumani", "Qo'ng'irot tumani", "Qorao'zak tumani", "Taxtako'pir tumani", "To'rtko'l tumani", "Xo'jayli tumani"]
            }
        };

        regionSelect.addEventListener('change', function() {
            const selectedRegion = this.value;
            districtSelect.innerHTML = '<option value="">Tumaningizni tanlang</option>';

            if (selectedRegion && citiesAndDistricts[selectedRegion]) {
                citiesAndDistricts[selectedRegion].districts.forEach(district => {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
            }
        });
    </script>
</body>
</html>

